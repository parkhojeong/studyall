* if an entity exists in the 1st cache, return it 
```java
Member member = new Member(1L);

em.persist(member); // stored in 1st cache

em.find(Member.class, 1L); // find in 1st cache
```

* if an entity doesn't exist in the 1st cache, find in db and stroe in 1st cache  
```java
em.find(Member.class, 1L); // if not exists in 1st cache, find in db and stored in 1st cache
```

* persistent entity guarantees equality in same transaction
- 1st cache support isolation level is REPEATABLE_READ  
```
en.find(Member.class, 1L) == em.find(Member.class, 1L);
```

* transactional write-behind  
- insert query from em.persist() is stored in the write-behind queue 
- when the transaction is committed, the write-behind queue is executed

* dirty checking  
- when an entity is loaded to the 1st cache(persistent context), the snapshot is stored
- if an entity is modified, 
  - it is compared with the snapshot 
  - and an update query is generated to write-behind queue