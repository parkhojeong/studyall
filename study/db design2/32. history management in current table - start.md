idea
- when update is required, insert a new row instead of updating
- is_current separate current row or not
```sql
DROP TABLE IF EXISTS product;

CREATE TABLE product (
    history_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    product_id BIGINT NOT NULL,
    name VARCHAR(200) NOT NULL,
    price INT NOT NULL,
    stock_quantity INT NOT NULL DEFAULT 0,
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE',
    is_current BOOLEAN NOT NULL DEFAULT TRUE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(100) NOT NULL,
    
    INDEX idx_product_id (product_id),
    INDEX idx_is_current (is_current),
    INDEX idx_product_id2 (product_id, created_at)
);
```

insert data
```sql
INSERT INTO product (product_id, name, price, stock_quantity, status, is_current, created_by, created_at)
VALUES (1, '스마트폰 케이스', 15000, 100, 'ACTIVE', TRUE, 'admin_kim', '2026-01-15 10:00:00');

INSERT INTO product (product_id, name, price, stock_quantity, status, is_current, created_by, created_at)
VALUES (2, '무선 이어폰', 89000, 50, 'ACTIVE', TRUE, 'admin_lee', '2026-01-15 10:05:00');
```

update data
```sql
-- 1. 기존 행을 과거 데이터로 변경
UPDATE product
SET is_current = FALSE
WHERE product_id = 1 AND is_current = TRUE;

-- 2. 새로운 행 추가
INSERT INTO product (product_id, name, price, stock_quantity, status, is_current, created_by, created_at) VALUES (1, '스마트폰 케이스', 12000, 100, 'ACTIVE', TRUE, 'admin_park', '2026-03-01 10:00:00');
```

update data one more time
```sql
-- 1. 기존 행을 과거 데이터로 변경
UPDATE product
SET is_current = FALSE
WHERE product_id = 1 AND is_current = TRUE;

-- 2. 새로운 행 추가
INSERT INTO product (product_id, name, price, stock_quantity, status, is_current, created_by, created_at) VALUES (1, '스마트폰 케이스', 10000, 95, 'ACTIVE', TRUE, 'admin_kim', '2026-03-15 14:00:00');
```

* data update
1. an existing row is updated is_current = FALSE
2. the new row is inserted

* current data query by `is_current = TRUE`

pros
1. all history data is saved
2. the implementation is simple