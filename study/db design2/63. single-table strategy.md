* single-table strategy: use one table
product
- product_id(pk),name,price
- product_type(discriminator column - dtype)
- book: author, isbn, publisher
- electronics: manufacturer, warranty_months
- clothing: size, color, material

table design
```sql
-- 기존 테이블 정리
DROP TABLE IF EXISTS book;
DROP TABLE IF EXISTS electronics;
DROP TABLE IF EXISTS clothing;
DROP TABLE IF EXISTS product;

CREATE TABLE product (
  product_id BIGINT PRIMARY KEY AUTO_INCREMENT,
  product_type VARCHAR(20) NOT NULL, -- 'BOOK', 'ELECTRONICS', 'CLOTHING'
 
  -- 공통 속성
  name VARCHAR(200) NOT NULL,
  price INT NOT NULL,
  stock_quantity INT NOT NULL DEFAULT 0,
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 
  -- 도서 전용 속성
  author VARCHAR(100),
  isbn VARCHAR(13),
  publisher VARCHAR(100),
 
  -- 전자제품 전용 속성
  manufacturer VARCHAR(100),
  warranty_months INT,
  power_consumption INT,
 
  -- 의류 전용 속성
  size VARCHAR(10),
  color VARCHAR(50),
  material VARCHAR(100),
 
  INDEX idx_product_type (product_type)
);
```

insert data
```sql
-- ### 데이터 입력
-- 도서 데이터 입력
INSERT INTO product (product_type, name, price, stock_quantity, author, isbn, publisher)
VALUES
  ('BOOK', '클린 코드', 33000, 100, '로버트 마틴', '9788966260959', '인사이트'),
  ('BOOK', '이펙티브 자바', 36000, 50, '조슈아 블로크', '9788966262281', '인사이트'),
  ('BOOK', 'JPA 프로그래밍', 43000, 30, '김영한', '9788960777330', '에이콘');

-- 전자제품 데이터 입력
INSERT INTO product (product_type, name, price, stock_quantity, manufacturer, warranty_months, power_consumption)
VALUES
  ('ELECTRONICS', '갤럭시', 1800000, 200, '삼성전자', 24, 15),
  ('ELECTRONICS', '맥북 프로 14', 2500000, 50, '애플', 12, 96),
  ('ELECTRONICS', 'LG 그램 17', 1800000, 80, 'LG전자', 24, 65);

-- 의류 데이터 입력
INSERT INTO product (product_type, name, price, stock_quantity, size, color, material)
VALUES
  ('CLOTHING', '오버핏 맨투맨', 35000, 500, 'L', '블랙', '면 100%'),
  ('CLOTHING', '슬림핏 청바지', 59000, 300, 'M', '인디고', '데님'),
  ('CLOTHING', '패딩 점퍼', 189000, 100, 'XL', '네이비', '폴리에스터');
```

all product query
```sql
-- ### 전체 상품 조회
SELECT product_id, product_type, name, price, stock_quantity
FROM product
ORDER BY product_id DESC;
```

product query by type
```sql
-- 도서만 조회
SELECT product_id, name, price, author, publisher
FROM product
WHERE product_type = 'BOOK';

-- 전자제품만 조회
SELECT product_id, name, price, manufacturer, warranty_months
FROM product
WHERE product_type = 'ELECTRONICS';
```

product query by id
```sql
-- ### 상품 ID로 조회
    
-- product_id = 5인 상품 조회
SELECT product_id, product_type, name, price
FROM product
WHERE product_id = 5;
```

use fk in orders
```sql
DROP TABLE IF EXISTS orders;
CREATE TABLE orders (
  order_id BIGINT PRIMARY KEY AUTO_INCREMENT,
  product_id BIGINT NOT NULL,
  quantity INT NOT NULL,
  order_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (product_id) REFERENCES product(product_id)
);

-- 주문 데이터 입력
INSERT INTO orders (product_id, quantity) VALUES (1, 2); -- 클린 코드 2권
INSERT INTO orders (product_id, quantity) VALUES (4, 1); -- 갤럭시 1개
INSERT INTO orders (product_id, quantity) VALUES (7, 3); -- 오버핏 맨투맨 3개
```

an error occurs if fk does not exist
```sql
-- 존재하지 않는 상품 참조 시도
INSERT INTO orders (product_id, quantity) VALUES (999, 1);
```

join orders and product
```sql
-- ### 주문과 상품 조인
SELECT
  o.order_id,
  o.quantity,
  p.product_type,
  p.name,
  p.price,
  (o.quantity * p.price) AS total_price
FROM orders o
JOIN product p ON o.product_id = p.product_id;
```