eav design
- supertype/subtype design limit: dynamic change is hard
- dynamic table count, attribute count

eav pattern
- eav concept: entity, attribute, value. attribute is saved in a row
- core characters
  - schema flexibility: attribute can be added by insert
  - difference by entity: the same entity can have different attributes

eav practice - shopping mall attribute management
- table design
  - product: common info of all products
  - product_attribute: different attributes of each product
- data query
  - product join product_attribute
- pivot: case when, max

eav pattern enhancement - attribute definition table
- attribute metadata can be managed
  - when an attribute is stored, it references the attribute definition table
- pros
  - attribute list can be defined by category
  - front-end can use metadata for form(text, select, etc)

eav pros and cons, caution
- pros
  - flexible 
- cons
  - type validation is hard
- practice tips
  - column separation by type: val_text, val_int, val_date
  - hybrid approach: main table + extra(eav)

* eva advise 
- if possible, don't use eav
1. data integrity lost
2. sql complexity increased
3. performance decreased

when to use eav
traditional table design can't solve dynamic requirement anymore

* modern alternatives: json type
- next, json type is introduced