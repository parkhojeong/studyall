tradeoff using valid period(valid_from, valid_to)
pros
1. the query is simple
2. query performance is good
3. index is efficient
cons
1. table is immutable
- valid_to is updated when the row is updated
2. transaction is required
- update and insert must be executed in a single transaction

practical recommendation

| situation                               | whether valid period is used |
|-----------------------------------------|------------------------------|
| query at specific time is rare          | X                            |
| query at specific time is frequent      | O                            |
| many statistics batch at specific time  | O                            |
| history table immutability is important | X                            |


practical example
1. table using valid period(master data)
status is updated rarely
- target: product, member, category, department, etc
- characters: after data is created, status is continued for a period
- reason: a query to past status is frequently used
  - example
    - at 2024-12-25, what is the product price?
    - last year, during an event period, what is the member grade?
2. table not using valid period(transaction/log data)
event history is updated frequently
- target: orders, payments, point_history, access_log, etc
- characters: time is important when data occurs. if an event occurs, it is immutable
- reason: event time(created_at) is important to orders or payment.
  - it is awkward that order is valid from pm1 to pm2

summary

| division         | characters                    | example                       | using valid period | reason                                                                  |
|------------------|-------------------------------|-------------------------------|--------------------|-------------------------------------------------------------------------|
| master data      | status keep, criteria info    | product, member, organization | O                  | query of status at specific point is important(price, grade)            |
| transaction data | event occurrence, history log | orders, payment, log          | X                  | created_at is important, update cost is large because data size is huge |
