* how about nosql like mongodb?
document-based db

core difference comparison

* data model
rdb(mysql)
- table, row, column
- normalized schema
- join
- schema change require `alter table`
nosql(mongodb)
- collection, document
- flexible schema(schemaless)
- embedding or reference
- schema change is easy

* transaction consistency
rdb(mysql)
- strong acid transaction
- multi table transaction supported
- strong consistency guarantee
nosql(mongodb)
- single document atomicity by default
- multi document transaction supported partially
- eventual consistency model

* scalability
rdb(mysql)
- scale-up based
- scale-out is hard
- read scale-out is possible by replication
nosql(mongodb)
- scale-out is easy
- internal sharding supported
- it is optimized to distributed environment

* query ability
- rdb is strong

* when, what to use?
- data consistency is important -> rdb
- complex relationship and join is required -> rdb
- existing rdb infra is used -> rdb
- partial schema flexibility is required -> rdb + json
case that nosql is better
- schema is very dynamic
- large scale horizontal scaling is required
  - TB, PB level data
  - data is stored in different region

* hybrid design
example: e-commerce system
rdb
- order, payment, stock(transaction is important)
- user info(consistency is important)
- product basic info + json attribute
nosql(document db)
- product review(flexible schema)
- log, event data(large scale)
- personalized recommendation data
key-value db
- session stroage
- cache
- real-time ranking
elasticsearch
- full text search
- log analysis
- product search

* practice real advise
- rdb is enough for most cases
- use json type in rdb
- nosql make production complex
  - all team members learn nosql
  - server and metric to monitor increased 
  - back and recovery strategy is required
  - when system is failed, expert is required

* first use rdb
1. always consider rdb first
2. use json and eav pattern
3. last, carefully consider nosql. nosql is last resort