* what is adjacency list model?
- each row references its own parent. structure is the answer of "who is my parent"
core idea
- each node has pk to its parent node
- the root node has null of pk
```sql
create table category(
    category_id bigint auto_increment,
    name varchar(100),
    parent_id bigint,
    primary key(category_id),
    foreign key(parent_id) references category(category_id)
)
```
- parent_id: fk to parent node. it makes a self-referencing relationship

insert data
```sql
-- ### 데이터 입력


-- 1단계: 최상위 카테고리 (루트)
INSERT INTO category (name, parent_id) VALUES ('전자제품', NULL); -- id:1
INSERT INTO category (name, parent_id) VALUES ('의류', NULL);  -- id:2
INSERT INTO category (name, parent_id) VALUES ('식품', NULL);  -- id:3

-- 2단계: 전자제품의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('컴퓨터', 1);  -- id:4
INSERT INTO category (name, parent_id) VALUES ('스마트폰', 1); -- id:5
INSERT INTO category (name, parent_id) VALUES ('가전제품', 1); -- id:6

-- 3단계: 컴퓨터의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('노트북', 4);
INSERT INTO category (name, parent_id) VALUES ('데스크탑', 4);
INSERT INTO category (name, parent_id) VALUES ('태블릿', 4);

-- 3단계: 스마트폰의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('애플', 5);
INSERT INTO category (name, parent_id) VALUES ('삼성', 5);

-- 3단계: 가전제품의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('TV', 6);
INSERT INTO category (name, parent_id) VALUES ('냉장고', 6);

-- 2단계: 의류의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('남성의류', 2);
INSERT INTO category (name, parent_id) VALUES ('여성의류', 2);

-- 3단계: 남성의류의 하위 카테고리
INSERT INTO category (name, parent_id) VALUES ('셔츠', 14);
INSERT INTO category (name, parent_id) VALUES ('바지', 14);
```

- root node query
```sql
select * from category where parent_id is null;
```

- query child of a specified category
```sql
-- 전자제품(id=1)의 직속 자식 조회
use my_shop4;
SELECT * FROM category WHERE parent_id = 1;
```

- query parent of a specified category
```sql
SELECT * 
FROM category c1
join category c2 on c1.parent_id = c2.category_id
WHERE c1.category_id = 7;
```

* adjacency list model pros
- intuitive structure
- simple data addition/modification/deletion
- storage efficiency
- fk constraint usage

- adjacency list model addition/modification/deletion
```sql
insert into category (name, parent_id) values ('게이밍노트북', 7);

update category set parent_id = 6 where category_id = 7;

delete from category where category_id = 17;
```

* adjacency list model limit
- variable depth query is hard