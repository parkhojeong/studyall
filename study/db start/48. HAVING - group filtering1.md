* HAVING - group filtering
- requirement: from order_stat, group by category, having sum(price*quantity) > 500,000
- select category
```sql
select category
from order_stat
group by category
having sum(price*quantity) > 500000
```

```sql
select category
from order_stat
where sum(price*quantity) > 500000
group by category;
-- Error Code: 1111. Invalid use of group function
```
* where is processed before group by
- SQL processing order: FROM -> WHERE -> GROUP BY -> ... -> SELECT -> ORDER BY

* WHERE, HAVING
suppose students is in school
1. students in school
2. filter students who use glasses (WHERE)
3. group by class (GROUP BY)
4. filter average (score > 80) class (HAVING) 

* HAVING usage
- GROUP BY + HAVING 
- filter group
- concept: HAVING condition use aggregate function. filter group
- processing order: FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY

* SQL standard. use alias in HAVING
- HAVING stage before SELECT
  - DBMS supports
    - MySQL, PostgreSQL: support
    - Oracle, SQL Server: not support
- recommendation: use aggregation function instead of alias in HAVING

* example 1: important category filtering
- from order_stat, group by category, having sum(price*quantity) >= 500,000
- select category
```sql
select category
from order_stat
group by category
having sum(price*quantity) >= 500000;
```

* example 2: vip customer filtering
- from order_stat, group by customer_name, having count(*)>=3,
- select customer_name
```sql
select customer_name
from order_stat
group by customer_name
having count(*)>=3;
```