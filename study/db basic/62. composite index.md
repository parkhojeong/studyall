* composite index(multi column index)
- column order is important

* why is column order important?
- composite index execution principle. same as dictionary, phone book
  - dictionary: sort by the first letter, and then sort by the second letter
  - phone book: sort by last name, and then sort by first name

suppose that create index items(category, price)
```
+------------+-----------+---------+
| category   | price     | item_id |
+------------+-----------+---------+
| 도서       | 18000     | 21      |
| 도서       | 22000     | 25      |
| 도서       | 28000     | 15      |
| 도서       | 30000     | 4       |
| 도서       | 35000     | 11      |
+------------+-----------+---------+
| 생활용품   | 5000      | 16      |
| 생활용품   | 15000     | 5       |
| 생활용품   | 40000     | 9       |
| 생활용품   | 60000     | 19      |
+------------+-----------+---------+
| 전자기기   | 80000     | 3       |
| 전자기기   | 90000     | 14      |
| 전자기기   | 120000    | 1       |
| 전자기기   | 200000    | 24      |
| 전자기기   | 250000    | 7       |
| 전자기기   | 300000    | 13      |
| 전자기기   | 350000    | 23      |
| 전자기기   | 450000    | 2       |
| 전자기기   | 800000    | 20      |
| 전자기기   | 1500000   | 10      |
+------------+-----------+---------+
| 패션       | 45000     | 18      |
| 패션       | 70000     | 6       |
| 패션       | 95000     | 8       |
| 패션       | 180000    | 17      |
+------------+-----------+---------+
| 헬스/뷰티  | 20000     | 12      |
| 헬스/뷰티  | 25000     | 22      |
+------------+-----------+---------+
```
- search by category: search fast
- search by category and price: search fast
  - sort is always done
- search by price: using index is not efficient

* composite index general rule
1. use index sequentially(index left-prefix rule)
2. = condition first, range condition last
3. order by should follow index order

```sql
SHOW INDEX FROM items;

DROP INDEX idx_items_item_name ON items;
DROP INDEX idx_items_price_name ON items;
DROP INDEX idx_items_price ON items;
DROP INDEX idx_items_price_category_temp ON items;
DROP INDEX idx_items_category_price ON items;

create index idx_items_category_price on items(category, price);
```

* composite index success example1: category usage
```sql
explain select * from items where category ='전자기기';
```

* composite index success example2: category and price usage
```sql
explain select * from items where category ='전자기기' and price = 120000;
explain select * from items where price = 120000 and category ='전자기기'; -- same result
```
- type: ref -> index
- rows: 1 -> estimated 1 row

* composite index success example3: composite index and order by
```sql
explain select * from items where category ='전자기기' and price > 400000 order by price;
```
- index data is sorted by category, price already
- if order by clause match composite index, filesort is not used 