* foreign key constraint
- force data integrity between two tables 

* pk role: prevent ghost data
1. in parent table
  - prevent modifying(delete, update) the row referenced by child table
  - so, child row always references parent row
2. in child table
  - prevent using(insert, update) parent_id not in the parent table
  - so, child row always references row in the parent table 

```sql
-- user_id = 999 is not in the user table
INSERT INTO orders(user_id, product_id, quantity) VALUES(999, 1, 1);
/*
Error Code: 1452. 
Cannot add or update a child row: a foreign key constraint fails 
(`my_shop2`.`orders`, CONSTRAINT `fk_orders_users` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`)) 
 */
 
-- order_id = 1 is in the orders table
SELECT * FROM orders WHERE user_id = 1;
/*
Error Code: 1451. 
Cannot delete or update a parent row: a foreign key constraint fails 
(`my_shop2`.`orders`, CONSTRAINT `fk_orders_users` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`))
*/
```

* ON DELETE / ON UPDATE option
when delete or update parent table row  
- RESTRICT(default): if child references the row, can't delete or update 
- CASCADE: delete or update child rows also
- SET NULL: set child row's foreign key column to NULL

* CASCADE - practice
- CASCADE is not recommended. recommend that application explicitly handle data(modify child and parent)
