* subquery introduce
- requirement: what product is higher than average price of all products?

* approach: 2 stage
1. avg = select avg(price) from products
2. select * from products where price > avg 

- include 1st stage in 2nd stage -> subquery 

* subquery concept
- SELECT in SQL Query(main query)
  - (sub query) in (main query)
```sql
select * 
from products 
where price > (select avg(price) from products);
```
- query execution order
1. execute subquery 
2. subquery result is calculated
3. select * from products where price > 167166.67;
4. execute main query

- subquery types  
  - column
    - single 
    - two or more
  - row 
    - single 
    - two or more
```
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
| Classification | Return Shape  | Usage Location    | Operators / Syntax | Common Names         | Key Purpose                              |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
| Single Column  | Single Row    | SELECT, WHERE,    | =, >, <, !=, etc.  | - Scalar Subquery    | When a single value is required          |
|                |               | HAVING            |                    |                      | (Value comparison, Displaying a value)   |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
|                | Multiple Rows | WHERE, HAVING     | IN, ANY, ALL       | - Multiple-row       | Compare against a list of values         |
|                |               |                   |                    |   Subquery           | (List comparison)                        |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
| Multiple Cols  | Single Row    | WHERE, HAVING     | (c1, c2) = ...     | - Multi-col Subquery | Precise 1:1 comparison of multiple       |
|                |               |                   |                    | - Row Subquery       | column pairs                             |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
|                | Multiple Rows | WHERE, HAVING     | (c1, c2) IN ...    | - Multi-col Subquery | Check if a combination of columns        |
|                |               |                   |                    |                      | exists in a list (tuple comparison       |                        |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
| Multiple Cols  | Multiple Rows | FROM              | FROM (...) AS alias| - Table Subquery     | Create a temporary virtual table         |
|                |               |                   |                    | - Derived Table      | for JOINs or re-processing               |
+----------------+---------------+-------------------+--------------------+----------------------+------------------------------------------+
- Table Subquery can use in single row, single column. commonly used to multiple rows, columns
- Names is various  
```