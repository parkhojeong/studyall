* table subquery
- subquery in FROM clause
- called inline view, table subquery, 
- requirement: each product category, show most expensive product

```sql
select category, max(price) as max_price -- need name
from products
group by category
```
```result
category  max_price
'전자기기'  '350000'
'도서'     '28000'
'패션'     '150000'
```

- use subquery like table
```sql
select *
from products p1
join (
    select category, max(price) as max_price
    from products
    group by category
) p2 on p1.category = p2.category and p1.price = p2.max_price
```

* query execution flow
1. subquery execute, p2 temp table creation in memory
2. main query execute, join with p2
3. check on condition 

* memo(not important)
- from clause correlational subquery - LATERAL
- commonly not used. hard to use, low performance

- rewrite subquery
```sql
select *
from products p1
where p1.price = (
	select max(price)
    from products p2
    where p2.category = p1.category
);
```