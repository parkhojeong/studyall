* problem and solution

* problem1
- from products, translate category to english
  - '전자기기' -> 'Electronics'
  - '도서' -> 'Books'
  - '패션' -> 'Fashion'
  - alias category_english
- select name, category, category_english
```sql
select 
	name,
    category,
    case category
		when '전자기기' then 'Electronics'
        when '도서' then 'Books'
        when '패션' then 'Fashion'
        else 'Etc'
	 end as category_english
from products
```

* problem2: classification and order by order count
- requirement: from orders, classify by order count
- order_type column creation
  - if order count is two or more, 'many orders'
  - if order count is one, 'single order'
- select order_id, quantity, order_type
- order by order_type(many orders first)
```sql
select
  order_id,
  quantity,
  case
    when quantity >= 2 then 'many orders'
    when quantity = 1 then 'single order'
    end as order_type
from orders
order by
  case
    when quantity >= 2 then 0
    when quantity = 1 then 1
    end asc
```

* problem3: aggregate order count by stock level
- from products, group by stock_quantity, select count 
  - group
    - if stock >= 50 then 'stock enough'
    - if 20 <= stock < 50 then 'stock normal'
    - if stock < 20 then 'stock shortage'
select stock_level, product_count
```sql
select 
	case 
		when stock_quantity >= 50 then 'stock enough'
        when stock_quantity >= 20 then 'stock normal'
        else 'stock shortage'
	end as stock_level,
	count(*) as product_count
from products
group by 
	case 
		when stock_quantity >= 51 then 'stock enough'
        when stock_quantity >= 20 then 'stock normal'
        else 'stock shortage'
	end 
-- mysql supports: group by stock_level

```

* problem4: category order count by user pivot table creation
- each user, how many orders in each category. show result in pivot table format
- select user_name, total_orders, electronics_orders, books_orders, fashion_orders
- include user who doesn't have orders
```sql
select 
	u.name as user_name,
    count(*) as total_orders,
    sum(case when p.category = '전자기기' then 1 else 0 end) as electronics_orders,
	sum(case when p.category = '도서'    then 1 else 0 end) as books_orders,
    sum(case when p.category = '패션'    then 1 else 0 end) as fashion_orders
from 
    users u
left join 
    orders o on u.user_id = o.user_id
join 
    products p on o.product_id = p.product_id
group by 
    u.user_id;
```